[blog.miguelgrinberg.com](http://blog.miguelgrinberg.com "blog.miguelgrinberg.com")

# Мега-Учебник Flask, Часть 2: Шаблоны #
### *Miguel Grinberg* ###

----

Эта статья является переводом второй части нового издания учебника Мигеля Гринберга. [Прежний перевод](https://habrahabr.ru/post/193242/ "Прежний перевод") давно утратил свою актуальность. Оригинальный учебник избавлен от некоторых неточностей, вызванных быстрым развитием веб, но лучше пользоваться новым.

Автор планирует завершить его выпуск в мае 2018. Я, со своей стороны, постараюсь не отставать с переводом.


В этом втором выпуске серии Мега-Учебник Flask я расскажу о том, как работать с шаблонами.

Для справки ниже приведен список статей этой серии.

- **Глава 1: Привет, мир! (Эта статья)**
- **Глава 2: Шаблоны**
- **Глава 3: Веб-формы**
- **Глава 4: База данных**
- **Глава 5: Пользовательские логины**
- Глава 6: Страница профиля и аватары (доступно 9 января 2018 года)
- Глава 7: Обработка ошибок (доступно 16 января 2018 года)
- Глава 8: Подписчики, контакты и друзья (доступны 23 января 2018 года)
- Глава 9: Разбивка на страницы (доступна 30 января 2018 года)
- Глава 10: Поддержка электронной почты (доступна 6 февраля 2018 года)
- Глава 11: Реконструкция (доступна 13 февраля 2018 года)
- Глава 12: Дата и время (доступно 20 февраля 2018 года)
- Глава 13: I18n и L10n (доступно 27 февраля 2018 года)
- Глава 14: Ajax (доступно 6 марта 2018 года)
- Глава 15: Улучшение структуры приложения (доступно 13 марта 2018 года)
- Глава 16: Полнотекстовый поиск (доступен 20 марта 2018 года)
- Глава 17: Развертывание в Linux (доступно 27 марта 2018 года)
- Глава 18: Развертывание на Heroku (доступно 3 апреля 2018 года)
- Глава 19: Развертывание на Docker контейнерах (доступно 10 апреля 2018 года)
- Глава 20: Магия JavaScript (доступна 17 апреля 2018 года)
- Глава 21: Уведомления пользователей (доступно 24 апреля 2018 года)
- Глава 22: Справочные задания (доступны 1 мая 2018 года)
- Глава 23: Интерфейсы прикладного программирования (API) (доступно 8 мая 2018 г.)

*Примечание 1: Если вы ищете старые версии данного курса, это [здесь](https://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-i-hello-world-legacy "здесь").*

*Примечание 2: Если вдруг Вы хотели бы выступить в поддержку моей(Мигеля) работы в этом блоге, или просто не имеете терпения дожидаться неделю статьи, я (Мигель Гринберг)предлагаю полную версию данного руководства упакованную электронную книгу или видео. Для получения более подробной информации посетите [learn.miguelgrinberg.com](http://learn.miguelgrinberg.com "learn.miguelgrinberg.com").*

После завершения **главы 1** вы должны иметь полностью работающее, но простое веб-приложение, имеющее следующую структуру файлов:
    
	microblog\
	  venv\
	  app\
	    __init__.py
	    routes.py
	  microblog.py
    
Для запуска приложения вы устанавливаете `FLASK_APP=microblog.py` в сеансе терминала, а затем выполняете запуск flask. Это запустит веб-сервер с приложением, которое вы можете открыть, введя `http://localhost:5000` / URL в адресной строке вашего веб-браузера.

В этой главе вы продолжите работу над одним и тем же приложением, и, в частности, вы узнаете, как создавать более сложные веб-страницы, которые имеют сложную структуру и множество динамических компонентов. Если что-либо о приложении или технологическом процессе разработки пока неясно, перед продолжением просмотрите **главу 1**.

*Ссылки GitHub для этой главы:*  [Browse](https://github.com/miguelgrinberg/microblog/tree/v0.2), [Zip](https://github.com/miguelgrinberg/microblog/archive/v0.2.zip), [Diff](https://github.com/miguelgrinberg/microblog/compare/v0.1...v0.2).

## Что такое шаблоны? ##

Я хочу, чтобы на домашней странице моего приложения для микроблогов был заголовок, приветствующий пользователя. На данный момент я проигнорирую тот факт, что приложение еще не имеет концепции пользователей, поскольку это произойдет позже. Вместо этого я собираюсь использовать вымышленного (mock) пользователя, которого я собираюсь реализовать как словарь Python, следующим образом:

    user = {'username': 'Miguel'}

Создание mock-объектов - полезный метод, который позволяет вам сосредоточиться на одной части приложения, не беспокоясь о других частях системы, которые еще не существуют. Я хочу создать домашнюю страницу своего приложения, и я не хочу, чтобы у меня не было системы пользователя, чтобы отвлечь меня, поэтому я просто создаю объект пользователя.

Функция просмотра в приложении возвращает простую строку. Теперь я хочу расширить эту возвращаемую строку в полную HTML-страницу, возможно, что-то вроде этого:


	from app import app
	
	@app.route('/')
	@app.route('/index')
	def index():
	    user = {'username': 'miguel'}
	    return '''
	<html>
	    <head>
	        <title>Home Page - Microblog</title>
	    </head>
	    <body>
	        <h1>Hello, ''' + user['username'] + '''!</h1>
	    </body>
	</html>'''

Если Вы не знакомы с HTML, я рекомендую, чтобы Вы прочитали [Markup HTML](https://en.wikipedia.org/wiki/HTML#Markup) в Википедии для краткого введения.

Обновите функцию представления как показано выше и смотрите в Вашем браузере.

![](https://blog.miguelgrinberg.com/static/images/mega-tutorial/ch02-mock-user.png)

Я надеюсь, Вы согласитесь со мной, что решение, используемое выше, чтобы поставить HTML браузеру, не хорошо. Рассмотрите, как сложный кодекс в этой функции представления станет, когда у меня будут сообщения в блоге от пользователей, которые собираются постоянно измениться. Применение также будет иметь больше функций представления, которые будут связанными с другими URL, поэтому вообразите, решаю ли однажды я изменить расположение этого применения и должен обновить HTML в каждой функции представления. Это - ясно не выбор, который измерит, когда применение растет.

Если Вы могли бы сохранять логику своего заявления отдельной от расположения или представления Ваших веб-страниц, то вещи будут намного лучше организованы, разве Вы не думаете? Вы могли даже нанять веб-дизайнера, чтобы создать веб-сайт убийцы, в то время как Вы кодируете прикладную логику в Пайтоне.

Шаблоны помогают достигнуть этого разделения между представлением и бизнес-логикой. Во Фляге шаблоны написаны как отдельные файлы, хранившие в папке шаблонов, которая является в пакете прикладных программ. Таким образом, после проверки, что Вы находитесь в микрокаталоге блогов, создайте справочник, где шаблоны будут сохранены: